-- ‚ö° Speed Controller v2 - H·ª£p ph√°p & h·ªó tr·ª£ Mobile
-- T√°c gi·∫£: Nigger

local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local userInput = game:GetService("UserInputService")

-- GUI ch√≠nh
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SpeedControllerV2"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = playerGui

-- Khung ch√≠nh
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 260, 0, 150)
mainFrame.Position = UDim2.new(0.4, 0, 0.7, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Parent = screenGui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 10)

-- Ti√™u ƒë·ªÅ
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
title.Text = "‚ö° Speed Controller"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = mainFrame
Instance.new("UICorner", title).CornerRadius = UDim.new(0, 10)

-- Nh√£n t·ªëc ƒë·ªô
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(1, -20, 0, 25)
speedLabel.Position = UDim2.new(0, 10, 0, 40)
speedLabel.BackgroundTransparency = 1
speedLabel.TextColor3 = Color3.new(1, 1, 1)
speedLabel.Font = Enum.Font.Gotham
speedLabel.TextSize = 14
speedLabel.Text = "T·ªëc ƒë·ªô hi·ªán t·∫°i: 16"
speedLabel.Parent = mainFrame

-- Thanh tr∆∞·ª£t
local sliderBack = Instance.new("Frame")
sliderBack.Size = UDim2.new(1, -40, 0, 8)
sliderBack.Position = UDim2.new(0, 20, 0, 75)
sliderBack.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
sliderBack.BorderSizePixel = 0
sliderBack.Parent = mainFrame
Instance.new("UICorner", sliderBack).CornerRadius = UDim.new(0, 5)

local sliderFill = Instance.new("Frame")
sliderFill.Size = UDim2.new(0, 0, 1, 0)
sliderFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
sliderFill.BorderSizePixel = 0
sliderFill.Parent = sliderBack
Instance.new("UICorner", sliderFill).CornerRadius = UDim.new(0, 5)

local slider = Instance.new("Frame")
slider.Size = UDim2.new(0, 20, 0, 20)
slider.Position = UDim2.new(0, 0, -0.7, 0)
slider.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
slider.BorderSizePixel = 0
slider.Parent = sliderBack
Instance.new("UICorner", slider).CornerRadius = UDim.new(1, 0)

-- N√∫t Reset
local resetButton = Instance.new("TextButton")
resetButton.Size = UDim2.new(0, 100, 0, 30)
resetButton.Position = UDim2.new(0.5, -50, 0, 110)
resetButton.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
resetButton.TextColor3 = Color3.new(1, 1, 1)
resetButton.Font = Enum.Font.GothamBold
resetButton.TextSize = 14
resetButton.Text = "Reset"
resetButton.Parent = mainFrame
Instance.new("UICorner", resetButton).CornerRadius = UDim.new(0, 6)

-- Bi·∫øn & h√†m logic
local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
local draggingSlider, draggingFrame = false, false
local dragStart, startPos
local currentSpeed = 16

player.CharacterAdded:Connect(function(char)
	humanoid = char:WaitForChild("Humanoid")
	humanoid.WalkSpeed = currentSpeed
end)

local function setSpeed(speed)
	currentSpeed = math.clamp(speed, 10, 100)
	if humanoid then humanoid.WalkSpeed = currentSpeed end
	speedLabel.Text = "T·ªëc ƒë·ªô hi·ªán t·∫°i: " .. currentSpeed
end

local function updateSlider(x)
	local sliderWidth = sliderBack.AbsoluteSize.X
	local relativePos = math.clamp(x - sliderBack.AbsolutePosition.X, 0, sliderWidth)
	slider.Position = UDim2.new(0, relativePos - slider.AbsoluteSize.X / 2, slider.Position.Y.Scale, slider.Position.Y.Offset)
	sliderFill.Size = UDim2.new(0, relativePos, 1, 0)
	local percent = relativePos / sliderWidth
	setSpeed(math.floor(10 + percent * 90))
end

-- üñ±Ô∏è / üì± Drag thanh tr∆∞·ª£t (PC & Mobile)
local function startSliderDrag(input)
	draggingSlider = true
	updateSlider(input.Position.X)
end

local function startFrameDrag(input)
	draggingFrame = true
	dragStart = input.Position
	startPos = mainFrame.Position
end

slider.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		startSliderDrag(input)
	end
end)

sliderBack.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		startSliderDrag(input)
	end
end)

title.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		startFrameDrag(input)
	end
end)

userInput.InputChanged:Connect(function(input)
	if (draggingSlider or draggingFrame) and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
		if draggingSlider then
			updateSlider(input.Position.X)
		elseif draggingFrame then
			local delta = input.Position - dragStart
			mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end
end)

userInput.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		draggingSlider = false
		draggingFrame = false
	end
end)

-- Reset t·ªëc ƒë·ªô
resetButton.MouseButton1Click:Connect(function()
	setSpeed(16)
	slider.Position = UDim2.new(0, 0, -0.7, 0)
	sliderFill.Size = UDim2.new(0, 0, 1, 0)
end)