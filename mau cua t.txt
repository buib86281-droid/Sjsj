-- T·∫°o n√∫t ghim ng∆∞·ªùi ch∆°i g·∫ßn ƒë√≥
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

-- T·∫°o ScreenGui n·∫øu ch∆∞a c√≥
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "GhimNguoiChoiGui"
screenGui.Parent = playerGui

-- T·∫°o n√∫t
local ghimButton = Instance.new("TextButton")
ghimButton.Name = "GhimNguoiChoiButton"
ghimButton.Size = UDim2.new(0, 17, 0, 17) -- K√≠ch th∆∞·ªõc 17x17
ghimButton.Position = UDim2.new(0, 10, 0, 10) -- V·ªã tr√≠ g√≥c tr√™n tr√°i
ghimButton.Text = "üìç" -- Bi·ªÉu t∆∞·ª£ng ghim
ghimButton.TextScaled = true
ghimButton.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
ghimButton.Parent = screenGui

-- H√†m t√¨m ng∆∞·ªùi ch∆°i g·∫ßn nh·∫•t
local function timNguoiChoiGanNhat()
	local nhanVat = LocalPlayer.Character
	if not nhanVat or not nhanVat:FindFirstChild("HumanoidRootPart") then return end

	local viTriNguoiChoi = nhanVat.HumanoidRootPart.Position
	local nguoiGanNhat = nil
	local khoangCachGanNhat = math.huge

	for _, nguoiChoi in pairs(Players:GetPlayers()) do
		if nguoiChoi ~= LocalPlayer and nguoiChoi.Character and nguoiChoi.Character:FindFirstChild("HumanoidRootPart") then
			local viTriKhac = nguoiChoi.Character.HumanoidRootPart.Position
			local kc = (viTriKhac - viTriNguoiChoi).Magnitude
			if kc < khoangCachGanNhat then
				khoangCachGanNhat = kc
				nguoiGanNhat = nguoiChoi
			end
		end
	end

	return nguoiGanNhat
end

-- Khi b·∫•m n√∫t
ghimButton.MouseButton1Click:Connect(function()
	local nguoiGanNhat = timNguoiChoiGanNhat()
	if nguoiGanNhat then
		print("üîπ ƒê√£ ghim ng∆∞·ªùi ch∆°i g·∫ßn nh·∫•t: " .. nguoiGanNhat.Name)
	else
		print("‚ùå Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi ch∆°i g·∫ßn ƒë√≥.")
	end
end)--// LocalScript - Lock On Button
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Giao di·ªán n√∫t
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Button = Instance.new("TextButton", ScreenGui)

Button.Size = UDim2.new(0, 50, 0, 50)
Button.Position = UDim2.new(0, 20, 0, 200)
Button.Text = "Lock"
Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
Button.TextColor3 = Color3.new(1,1,1)
Button.BorderSizePixel = 0
Button.Visible = true

-- C·∫•u h√¨nh
local FOV = 120 -- g√≥c nh√¨n
local LockedTarget = nil
local Locking = false

-- H√†m t√¨m ng∆∞·ªùi ch∆°i g·∫ßn nh·∫•t trong FOV
local function GetClosestPlayer()
	local closestPlayer = nil
	local shortestDistance = math.huge
	
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local targetPos = player.Character.HumanoidRootPart.Position
			local camPos = Camera.CFrame.Position
			local dir = (targetPos - camPos).Unit
			local camDir = Camera.CFrame.LookVector
			
			local angle = math.deg(math.acos(camDir:Dot(dir)))
			
			if angle <= FOV / 2 then
				local distance = (camPos - targetPos).Magnitude
				if distance < shortestDistance then
					shortestDistance = distance
					closestPlayer = player
				end
			end
		end
	end
	
	return closestPlayer
end

-- Ghim camera
RunService.RenderStepped:Connect(function()
	if Locking and LockedTarget and LockedTarget.Character and LockedTarget.Character:FindFirstChild("HumanoidRootPart") then
		local targetHRP = LockedTarget.Character.HumanoidRootPart
		Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetHRP.Position)
	end
end)

-- Khi ·∫•n n√∫t
Button.MouseButton1Click:Connect(function()
	if not Locking then
		local target = GetClosestPlayer()
		if target then
			LockedTarget = target
			Locking = true
			Button.Text = "Unlock"
			Button.BackgroundColor3 = Color3.fromRGB(80, 255, 80)
		else
			Button.Text = "NoTarget"
			task.wait(0.5)
			Button.Text = "Lock"
		end
	else
		-- B·ªè ghim
		Locking = false
		LockedTarget = nil
		Button.Text = "Lock"
		Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
	end
end)--// LocalScript - Smooth Lock On Button
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- T·∫°o n√∫t GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
local Button = Instance.new("TextButton", ScreenGui)

Button.Size = UDim2.new(0, 50, 0, 50)
Button.Position = UDim2.new(0, 20, 0, 200)
Button.Text = "Lock"
Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
Button.TextColor3 = Color3.new(1,1,1)
Button.BorderSizePixel = 0
Button.AutoButtonColor = true
Button.Visible = true

-- C·∫•u h√¨nh
local FOV = 120
local LockedTarget = nil
local Locking = false
local Smoothness = 0.15 -- t·ªëc ƒë·ªô m∆∞·ª£t (0.1‚Äì0.3 l√† h·ª£p l√Ω)

-- H√†m t√¨m ng∆∞·ªùi g·∫ßn nh·∫•t trong FOV
local function GetClosestPlayer()
	local closestPlayer = nil
	local shortestDistance = math.huge
	
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local targetPos = player.Character.HumanoidRootPart.Position
			local camPos = Camera.CFrame.Position
			local dir = (targetPos - camPos).Unit
			local camDir = Camera.CFrame.LookVector
			
			local angle = math.deg(math.acos(camDir:Dot(dir)))
			
			if angle <= FOV / 2 then
				local distance = (camPos - targetPos).Magnitude
				if distance < shortestDistance then
					shortestDistance = distance
					closestPlayer = player
				end
			end
		end
	end
	
	return closestPlayer
end

-- H√†m camera lock-on m∆∞·ª£t
RunService.RenderStepped:Connect(function(dt)
	if Locking and LockedTarget and LockedTarget.Character and LockedTarget.Character:FindFirstChild("HumanoidRootPart") then
		local targetHRP = LockedTarget.Character.HumanoidRootPart
		local currentCFrame = Camera.CFrame
		local goalCFrame = CFrame.new(currentCFrame.Position, targetHRP.Position)
		Camera.CFrame = currentCFrame:Lerp(goalCFrame, Smoothness)
	end
end)

-- Khi nh·∫•n n√∫t
Button.MouseButton1Click:Connect(function()
	if not Locking then
		local target = GetClosestPlayer()
		if target then
			LockedTarget = target
			Locking = true
			Button.Text = "Unlock"
			Button.BackgroundColor3 = Color3.fromRGB(80, 255, 80)
		else
			Button.Text = "NoTarget"
			task.wait(0.5)
			Button.Text = "Lock"
		end
	else
		-- B·ªè ghim
		Locking = false
		LockedTarget = nil
		Button.Text = "Lock"
		Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
	end
end)--// LocalScript - Smooth Lock On + FOV Circle
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- T·∫°o GUI
local ScreenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))

-- N√∫t Lock
local Button = Instance.new("TextButton", ScreenGui)
Button.Size = UDim2.new(0, 50, 0, 50)
Button.Position = UDim2.new(0, 20, 0, 200)
Button.Text = "Lock"
Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
Button.TextColor3 = Color3.new(1,1,1)
Button.BorderSizePixel = 0
Button.AutoButtonColor = true
Button.Visible = true

-- V√≤ng tr√≤n FOV
local FOVCircle = Instance.new("Frame", ScreenGui)
FOVCircle.AnchorPoint = Vector2.new(0.5, 0.5)
FOVCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
FOVCircle.Size = UDim2.new(0, 400, 0, 400) -- k√≠ch th∆∞·ªõc v√≤ng tr√≤n (t√πy ch·ªânh theo FOV)
FOVCircle.BackgroundTransparency = 1

-- Th√™m UIStroke ƒë·ªÉ t·∫°o vi·ªÅn tr·∫Øng
local stroke = Instance.new("UIStroke", FOVCircle)
stroke.Thickness = 2
stroke.Color = Color3.fromRGB(255, 255, 255)
stroke.Transparency = 0.3

-- Bo tr√≤n h√¨nh vu√¥ng th√†nh v√≤ng tr√≤n
local corner = Instance.new("UICorner", FOVCircle)
corner.CornerRadius = UDim.new(1, 0)

-- C·∫•u h√¨nh
local FOV = 120
local LockedTarget = nil
local Locking = false
local Smoothness = 0.15 -- t·ªëc ƒë·ªô xoay m∆∞·ª£t

-- H√†m t√¨m ng∆∞·ªùi ch∆°i g·∫ßn nh·∫•t trong FOV
local function GetClosestPlayer()
	local closestPlayer = nil
	local shortestDistance = math.huge
	
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
			local targetPos = player.Character.HumanoidRootPart.Position
			local camPos = Camera.CFrame.Position
			local dir = (targetPos - camPos).Unit
			local camDir = Camera.CFrame.LookVector
			
			local angle = math.deg(math.acos(camDir:Dot(dir)))
			
			if angle <= FOV / 2 then
				local distance = (camPos - targetPos).Magnitude
				if distance < shortestDistance then
					shortestDistance = distance
					closestPlayer = player
				end
			end
		end
	end
	
	return closestPlayer
end

-- C·∫≠p nh·∫≠t camera m∆∞·ª£t khi ƒëang lock
RunService.RenderStepped:Connect(function(dt)
	if Locking and LockedTarget and LockedTarget.Character and LockedTarget.Character:FindFirstChild("HumanoidRootPart") then
		local targetHRP = LockedTarget.Character.HumanoidRootPart
		local currentCFrame = Camera.CFrame
		local goalCFrame = CFrame.new(currentCFrame.Position, targetHRP.Position)
		Camera.CFrame = currentCFrame:Lerp(goalCFrame, Smoothness)
	end
end)

-- Khi nh·∫•n n√∫t
Button.MouseButton1Click:Connect(function()
	if not Locking then
		local target = GetClosestPlayer()
		if target then
			LockedTarget = target
			Locking = true
			Button.Text = "Unlock"
			Button.BackgroundColor3 = Color3.fromRGB(80, 255, 80)
			stroke.Color = Color3.fromRGB(0, 255, 0) -- ƒë·ªïi v√≤ng tr√≤n th√†nh xanh khi ƒëang lock
			stroke.Transparency = 0
		else
			Button.Text = "NoTarget"
			task.wait(0.5)
			Button.Text = "Lock"
		end
	else
		-- B·ªè ghim
		Locking = false
		LockedTarget = nil
		Button.Text = "Lock"
		Button.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
		stroke.Color = Color3.fromRGB(255, 255, 255)
		stroke.Transparency = 0.3
	end
end)